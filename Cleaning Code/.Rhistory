#=============================================================#
# John Schoeneman
# Work Done For: PL SC 503
# Date: 4/28/2016
# Work Done: HW9
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
set.seed(19)
# load needed libraries
library(stargazer)
library(foreign)
library(RCurl)
library(plyr)
library(car)
library(clusterSEs)
library(vioplot)
# Load in data
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0",
convert.factors=FALSE)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta",
convert.factors=FALSE)
rep_data <- read.dta("http://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta",
convert.factors=FALSE)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0",
convert.factors=FALSE)
rep_data <- read.dta("http://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0",
convert.factors=FALSE)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta",
convert.factors=FALSE)
rep_data <- read.dta("http://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta",
convert.factors=FALSE)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0",
convert.factors=FALSE)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0",
convert.factors=FALSE)
rep_data <- read.csv("https://www.dropbox.com/s/7llwr60d7trtg3z/503_rep.csv?dl=0")
rep_url <- getURL("https://www.dropbox.com/s/7llwr60d7trtg3z/503_rep.csv?dl=0")
rep_data <- read.csv(text = rep_url)
rep_data <- read.csv(text = rep_url,head=TRUE,sep=",")
rep_url <- getURL("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0")
rep_data <- read.dta(text = rep_url)
rep_data <- read.dta(rep_url)
rep_data <- read.dta("https://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0")
rep_data <- read.dta("http://www.dropbox.com/s/a5ioi2rbgq8i5jh/503_rep.dta?dl=0")
rep_data <- read.dta("https://dl.dropboxusercontent.com/u/59567008/503_rep.dta")
rm(rep_url)
View(rep_data)
rep_data1 <-subset(rep_data, lag8incid==1 | lag8incid==0)
rep_data2 <-subset(rep_data, onset==1 | onset==0)
#Model 1
m1 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m1)
m2 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+
as.factor(year)+ as.factor(ccode)+
lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m2)
# subset data for above and below $1200
poor <- subset(rep_data1, loggdp<7.1)
rich <- subset(rep_data1, loggdp>=7.1)
poor1 <- poor[-277,]
# MODEL THREE
# if lag8~=. & loggdp<7.1, cluster(ccode) robust
m3 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=poor, family="binomial")
summary(m3)
# Model 4
m4 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rich, family="binomial")
summary(m4)
par(mfrow=c(1,1), mar= c(4,4,4,2.1))
# outlier Analysis
influencePlot(m1)
influencePlot(m2)
influencePlot(m3)
# distribution of values
on <- subset(poor, onset==1)
off <- subset(poor, onset==0)
on <- na.omit(on$OilDisc)
off<- na.omit(off$OilDisc)
vioplot(on, off, names=c("Conflict", "No Conflict"),
col="gray")
title("Distribution of Oil Discovery Values")
#=============================================================#
# John Schoeneman
# Work Done For: PL SC 503
# Date: 4/28/2016
# Work Done: HW9
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
set.seed(19)
# load needed libraries
library(stargazer)
library(foreign)
library(RCurl)
library(plyr)
library(car)
library(clusterSEs)
library(vioplot)
# Load in data
rep_data <- read.dta("/Users/johnpschoeneman/Documents/school/Penn State/Methods/503 - Multivariate Analysis I/503 Replication Project/503_rep.dta")
rep_data1 <-subset(rep_data, lag8incid==1 | lag8incid==0)
rep_data2 <-subset(rep_data, onset==1 | onset==0)
#Model 1
m1 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m1)
m2 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+
as.factor(year)+ as.factor(ccode)+
lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m2)
# subset data for above and below $1200
poor <- subset(rep_data1, loggdp<7.1)
rich <- subset(rep_data1, loggdp>=7.1)
poor1 <- poor[-277,]
# MODEL THREE
# if lag8~=. & loggdp<7.1, cluster(ccode) robust
m3 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=poor, family="binomial")
summary(m3)
# Model 4
m4 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rich, family="binomial")
summary(m4)
?influencePlot
par(mfrow=c(2,2), mar= c(4,4,4,2.1))
# outlier Analysis
influencePlot(m1)
influencePlot(m3)
influencePlot(m4)
influencePlot(m1, main="Model 1")
#=============================================================#
# John Schoeneman
# Work Done For: PL SC 503
# Date: 4/28/2016
# Work Done: HW9
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
set.seed(19)
# load needed libraries
library(stargazer)
library(foreign)
library(RCurl)
library(plyr)
library(car)
library(clusterSEs)
library(vioplot)
# Load in data
rep_data <- read.dta("/Users/johnpschoeneman/Documents/school/Penn State/Methods/503 - Multivariate Analysis I/503 Replication Project/503_rep.dta")
rep_data1 <-subset(rep_data, lag8incid==1 | lag8incid==0)
rep_data2 <-subset(rep_data, onset==1 | onset==0)
#Model 1
m1 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m1)
m2 <- glm(onset~OilDisc+loggdp+gdpINT+lagpcoilprod+laglogpop+laglogdurable+
as.factor(year)+ as.factor(ccode)+
lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rep_data1, family="binomial")
summary(m2)
# subset data for above and below $1200
poor <- subset(rep_data1, loggdp<7.1)
rich <- subset(rep_data1, loggdp>=7.1)
poor1 <- poor[-277,]
# MODEL THREE
# if lag8~=. & loggdp<7.1, cluster(ccode) robust
m3 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=poor, family="binomial")
summary(m3)
# Model 4
m4 <- glm(onset~OilDisc+loggdp+lagpcoilprod+laglogpop+laglogdurable+ethfrac+
relfrac +lmtnest+lagxpolity+lag1incid+lag2incid+lag3incid+lag4incid+lag5incid
,
data=rich, family="binomial")
summary(m4)
par(mfrow=c(2,2), mar= c(4,4,4,2.1))
# outlier Analysis
influencePlot(m1, main="Model 1")
influencePlot(m3, main="Model 3")
influencePlot(m4, main="Model 4")
#=============================================================#
# John Schoeneman
# Work Done For: Summer Research
# Date: 5/2016
# Work Done: Optimization Practice
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
set.seed(19)
rep_data <- read.csv("/Users/johnpschoeneman/Desktop/Summer 2016 Research Proposal/ged40-csv/ged40.csv")
View(rep_data)
View(rep_data)
rep_sub <- subset(rep_data, year=2000)
rep_sub <- subset(rep_data, year==2000)
View(rep_sub)
Y<-c(0,0,0,0,0,1,1,1,1,1)
X<-c(0,1,0,1,0,1,1,1,1,1) # No obs. where Y=1 and X=0
logL <- function(param) {
b0<-param[1]
b1<-param[2]
ll<-Y*log(exp(b0+b1*X)/(1+exp(b0+b1*X))) +
(1-Y)*log(1-(exp(b0+b1*X)/(1+exp(b0+b1*X)))) # lnL for binary logit
ll
} # Logit regression function
Bhat<-maxLik(logL,start=c(0,0))
summary(Bhat)
library(maxLik)
Bhat<-maxLik(logL,start=c(0,0))
summary(Bhat)
load("~/Desktop/Summer 2016 Research Proposal/Negotiation Data/Kaplow_data/NegotCalc_Replication.RData")
View(dat_orig)
unique(dat_orig$year)
unique(dat_orig$year, dat_orig$ccode)
unique(dat_orig$year, dat_orig$ccode)
View(data.dta)
View(data.dta)
# clear workspace
rm(list=ls())
set.seed(19)
# load needed libraries
library(stargazer)
library(foreign)
library(RCurl)
library(plyr)
library(car)
library(gvlma)
# Load in data
hw7_url <- getURL("https://raw.githubusercontent.com/PrisonRodeo/PLSC503-Spring-2016-git/master/Exercises/PLSC503-2016-ExerciseSeven.csv")
hw7_data <- read.csv(text = hw7_url)
rm(hw7_url)
# base OLS
linear.1 <- lm(cases~trade+tradebal+central, data=hw7_data)
summary(linear.1)
data transformation
par(mfrow=c(1,1), mar= c(4,4,4,2.1))
plot(hw7_data$trade, hw7_data$cases) # positive and linear
plot(hw7_data$tradebal, hw7_data$cases)  # positive?
boxplot(hw7_data$cases~hw7_data$central) # stark difference
#check for outliers
influencePlot(linear.1) #3: 85, 128, 130
gvlma(x=linear.1) # not good
library(lattice)
grid<-expand.grid(trade=seq(0,100,1),
tradebal=seq(-8,15,1), central=seq(0,1,1))
hats<-predict(linear.2,newdata=grid)
levelplot(hats~grid$trade*grid$tradebal,
contour=TRUE,
cuts=12,pretty=TRUE,xlab="Total Trade",
ylab="Trade Balance",
col.regions=heat.colors)
# interactions
linear.2 <- lm(cases~trade*tradebal+trade*central, data=hw7_data)
summary(linear.2)
library(lattice)
grid<-expand.grid(trade=seq(0,100,1),
tradebal=seq(-8,15,1), central=seq(0,1,1))
hats<-predict(linear.2,newdata=grid)
levelplot(hats~grid$trade*grid$tradebal,
contour=TRUE,
cuts=12,pretty=TRUE,xlab="Total Trade",
ylab="Trade Balance",
col.regions=heat.colors)
trellis.par.set("axis.line",list(col="transparent"))
theseCol=heat.colors(150)
wireframe(hats~grid$trade*grid$tradebal,
drape=TRUE,
xlab=list("Total Trade",rot=30),
ylab=list("Trade Balance",
rot=-40),zlab=list("Predictions",rot=90),
col.regions=theseCol,scales=list(arrows=FALSE,col="black"),
zoom=0.85,pretty=TRUE)
a <- linearHypothesis(linear.2,"trade+trade:tradebal")
b <- linearHypothesis(linear.2,"trade+trade:central")
# clear workspace
rm(list=ls())
set.seed(19)
# load needed libraries
library(gpcm)
install.packages("gpcm")
install.packages("ltm")
library(gpcm)
?rnorm
a <- rnorm(10, 1.5, .3)
b <- rnorm(10, 0 , 1)
d <- matrix(rnorm(40), 10, 4)
View(d)
is.na(d[1:2, 2:4]) <-TRUE
View(d)
is.na(d[3:4, 3:4]) <-TRUE
is.na(d[5:6, 4]) <-TRUE
View(d)
?rgpcm
??rgpcm
parms <- list(est=date.frae(cbind(a,b,d)))
parms <- list(est=date.frame(cbind(a,b,d)))
parms <- list(est=data.frame(cbind(a,b,d)))
class(parms) <- "gpcm"
plot(parms)
plot.gpcm(parms)
gpcm(parms)
library(ltm)
plot.gpcm(parms)
plot(parms)
est=data.frame(cbind(a,b,d))
class(est) <- "gpcm"
plot(parms)
plot(parms,plot.type="irf")
?rgpcm
??rgpcm
plot.gpcm(parms)
plot(d)
?plot.gpcm
plot.gpcm(parms, plot=TRUE)
plot(mtcars)
plot(mtcars)
#=============================================================#
# John Schoeneman
# Work Done For: R GIS
# Date: August 2016
# Work Done: Clean FDI data
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
setwd("/Users/johnpschoeneman/Dropbox/FA16 - RA - ZHU")
fdi <- read.csv("fdi_panel", stringsAsFactors=FALSE)
distance <- read.csv("dist.csv", stringsAsFactors=FALSE)
GDP <- read.csv("WB_GDP.csv", stringsAsFactors=FALSE)
# add distance data
fdi <- merge(fdi, distance, by.x =c("Dest.Code", "Origin.Code"), by.y = c("iso_d", "iso_o"))
fdi <- fdi[order(fdi$Destination, fdi$Year),]
# GDP data
fdi <- merge(fdi, GDP, by.x = c("Dest.Code", "Year"), by.y = c("Country.Code", "Year"))
colnames(fdi)[20] <- "Dest.GDP"
fdi <- merge(fdi, GDP, by.x = c("Origin.Code", "Year"), by.y = c("Country.Code", "Year"))
colnames(fdi)[21] <- "Origin.GDP"
#write csv
write.csv(fdi, file = "fdi_panel.csv")
#=============================================================#
# John Schoeneman
# Work Done For: R GIS
# Date: August 2016
# Work Done: Clean FDI data
# Machine: MacPro OSX Yosemite
#=============================================================#
# clear workspace
rm(list=ls())
setwd("/Users/johnpschoeneman/Documents/school/Penn State/RA:TA/FDI_IGERT_H/Cleaning Code")
fdi <- read.csv("fdi_panel", stringsAsFactors=FALSE)
distance <- read.csv("dist.csv", stringsAsFactors=FALSE)
GDP <- read.csv("WB_GDP.csv", stringsAsFactors=FALSE)
# add distance data
fdi <- merge(fdi, distance, by.x =c("Dest.Code", "Origin.Code"), by.y = c("iso_d", "iso_o"))
fdi <- fdi[order(fdi$Destination, fdi$Year),]
# GDP data
fdi <- merge(fdi, GDP, by.x = c("Dest.Code", "Year"), by.y = c("Country.Code", "Year"))
colnames(fdi)[20] <- "Dest.GDP"
fdi <- merge(fdi, GDP, by.x = c("Origin.Code", "Year"), by.y = c("Country.Code", "Year"))
colnames(fdi)[21] <- "Origin.GDP"
#write csv
write.csv(fdi, file = "fdi_panel.csv")
